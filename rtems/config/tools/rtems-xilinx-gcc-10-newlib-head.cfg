%include tools/rtems-gcc-10-newlib-head.cfg

%define xilinx_github_url https://raw.githubusercontent.com/Xilinx/meta-xilinx

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0001-LOCAL-Testsuite-builtins-tests-require-fpic.patch
%hash sha512 0001-LOCAL-Testsuite-builtins-tests-require-fpic.patch \
       5373e2a7ea6561263224e8da55318425eee7c91d633c45680183141093c2ea31aa7e7ee11a7ba3bd580a7edb405a162bc8904f48a354b154383fc938036a09c2

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0002-LOCAL-Quick-fail-g-.dg-opt-memcpy1.C.patch
%hash sha512 0002-LOCAL-Quick-fail-g-.dg-opt-memcpy1.C.patch \
       4bf9df22fe7be735deb2ee4353933eadf13fbee1f23254d4c870d8c99749e76eb8010cacb6143fad71c11b72063a774bd7ed050f61f7e75afe4cc3e945b83441

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0003-LOCAL-For-dejagnu-static-testing-on-qemu-suppress-wa.patch
%hash sha512 0003-LOCAL-For-dejagnu-static-testing-on-qemu-suppress-wa.patch \
       f8b8ae98a02d1aca64e3f91dad62977e006800b5b24112927fcd02a07fe40947f2209625b3b564cffb77dc6ab6e3db072cf93b26e925fed689b8d34b3cc612bf

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0004-Patch-testsuite-Add-MicroBlaze-to-target-supports-fo.patch
%hash sha512 0004-Patch-testsuite-Add-MicroBlaze-to-target-supports-fo.patch \
       f7823ba440cb3288fa372c690ffb878269915ee75be2693414338817e3bd8e9fd52545df4012b95c736d0a2fcca927bead86d5d9e70952af10b696299e3b2a4f

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0005-Patch-testsuite-Update-MicroBlaze-strings-test.patch
%hash sha512 0005-Patch-testsuite-Update-MicroBlaze-strings-test.patch \
       1d63269e9bf6eb92e6a18a371d8c89c5a7d8735f1483d798a1e486e38d98e9b72fb95515374e8f241ddfa43e6eb90ffb876b1f066fcd3fc230d1370c34db778a

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0006-Patch-testsuite-Allow-MicroBlaze-.weakext-pattern-in.patch
%hash sha512 0006-Patch-testsuite-Allow-MicroBlaze-.weakext-pattern-in.patch \
       bf858501c97890035b05692c028c5f6fb66f1554cff59249e6af3e9882ab9a87d47e3696aa2e7a175bb1bf5dd38ba328e42474922706b5db93d2d5daaac7b620

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0007-Patch-testsuite-Add-MicroBlaze-to-check_profiling_av.patch
%hash sha512 0007-Patch-testsuite-Add-MicroBlaze-to-check_profiling_av.patch \
       5d86cdf759dcf7261ec3d3665fe488a76d1dac47040fa55a9ddd5d7764d6de6ef4848467f3e41aab1ba774d7c59eb1649f7882bd9ef3bfcae84c71fcaba64d81

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0008-Patch-microblaze-Fix-atomic-side-effects.patch
%hash sha512 0008-Patch-microblaze-Fix-atomic-side-effects.patch \
       422a48b95dbc4370ae2a07e90a42b7a5eca1757f5396d8c660f134629fed2cc694e2409e5d5cc835d69526a7c5316c94345acfc193faaa6b1caeab45f726bf7f

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0009-Patch-microblaze-Fix-atomic-boolean-return-value.patch
%hash sha512 0009-Patch-microblaze-Fix-atomic-boolean-return-value.patch \
       4c0b452cead51332c2987150009e7c41e4609d0ecc9cb2cecc15cc84a5861787a44adc60ecf27d8314af7d164e87a49a370c398298801043a1499f12f720084d

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0010-Patch-microblaze-Fix-the-Microblaze-crash-with-msmal.patch
%hash sha512 0010-Patch-microblaze-Fix-the-Microblaze-crash-with-msmal.patch \
       5a0a0bbc9bcb16b97893f681b18900d37c572deb97eebd9849a06e481db77c37df9d2f67f9614ba02163bf7fde2be10fb7f3b43070e1728da27d52f5a0967bc2

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0011-Patch-microblaze-Added-ashrsi3_with_size_opt.patch
%hash sha512 0011-Patch-microblaze-Added-ashrsi3_with_size_opt.patch \
       104f0f80138f277ad8869a7a0261c647ee933bd053f4ce8f7f12675145ecabb1bf3015d16968534910e98cf518377beb9939721cd01de677d2c8f5bc3957373d

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0012-Patch-microblaze-Use-bralid-for-profiler-calls.patch
%hash sha512 0012-Patch-microblaze-Use-bralid-for-profiler-calls.patch \
       ad05cd7b91db89596394d538fd97833e374ae98b666e25ce5d379f16abe23acca106957404316d43e153375dde699fec8f385d1a6c54174f29649eb4d63604cd

%patch add gcc -p1 %{xilinx_github_url}/rel-v2021.1/meta-microblaze/recipes-devtools/gcc/gcc-10/0013-Patch-microblaze-Removed-moddi3-routinue.patch
%hash sha512 0013-Patch-microblaze-Removed-moddi3-routinue.patch \
       07cde4e4f5b7bfb8cd5c89c865cc4e4c36b943b5b24035df4b18c6e9b30b9513089344105d0c05a31f2c4606ab1034c5dcc3541d6792893027ad5e3dbfb04429

%patch add gcc -p1 https://devel.rtems.org/raw-attachment/ticket/4481/0001-gcc-config-aarch64-rtems.h-Define-__USE_INIT_FINI__.patch
%hash sha512 0001-gcc-config-aarch64-rtems.h-Define-__USE_INIT_FINI__.patch \
       84253c3c180fbfc6b640ffda72e8574f95661bdf3132503acc3f1b73a8f78aeb0508c06dbb32d1c8363ff083765194eeff14e46445946969c51a4498d2b3a0e7

%patch add gcc -p1 https://devel.rtems.org/raw-attachment/ticket/4481/0002-config-microblaze-crti.S-Add-single-underscore-init-.patch
%hash sha512 0002-config-microblaze-crti.S-Add-single-underscore-init-.patch \
       bf1ec7eff0dd51d154dd0507edb085458c90a000f5a3ccefb1064147cf8fdafe0111d2094372e164976f2193c289bff9ea63dcad43555c90893272a494b7e779

%patch add gcc -p1 https://devel.rtems.org/raw-attachment/ticket/4589/0001-microblaze-Define-__ELF__-for-RTEMS-target.patch
%hash sha512 0001-microblaze-Define-__ELF__-for-RTEMS-target.patch \
       39c0666c2e5c560447f00ed913cd07261e9c0db05b0cc549400667013ccf1d4140c0bd7b012d60dd628235bf7ae27564460a45e969e9cff75d14ed94bfd82632
