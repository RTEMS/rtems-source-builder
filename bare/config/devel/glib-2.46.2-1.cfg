#
# GLib
#

%if %{release} == %{nil}
%define release 1
%endif

%include %{_configdir}/base.cfg

%define glib_version_major 2.46
%define glib_version_minor 2
%define glib_version       %{glib_version_major}.%{glib_version_minor}

%hash sha512 glib-%{glib_version}.tar.xz \
          i1KYcScQ13tKRzZwcfeC0rswQrFJ7I/ejAZfgL88U3XJQxjRlmXACSVy5IleWQIxpHMk0l83ExDwK0P+swCViA==

%patch add glib https://ftp.rtems.org/pub/rtems/releases/5/5.2/sources/glib-2.46.2-werror.patch
%hash sha512 glib-2.46.2-werror.patch \
          Bd5c6+1lTRWhLJp/J1RXfTE3fNkwb058E8zKioEwe7lYwjk4NkXXm/FU002znAVcxBV9HuEy3TLFU906jgTisA==

%patch add glib https://gist.githubusercontent.com/roncapat/34eb82ece80ac26fd290a50dc7e85219/raw/247750ad17c31b26ef31af909fbcac05e57f71bd/glibc_2.46-2.1_rtems_5_rsb.patch
%hash sha512 glibc-2.46-2.1-rtems-5-rsb.patch \
          6fS0eaLKU/wsMGzwD/cGNycCVQebR9Jquj9pQQtUU+ZTLHuT7Toe1U1ApTXPY69DFngBNXZPsRnE5yUmmzzi/w==

#
# The GLib build instructions. We use 2.x.x Release 1.
#
%if !%{pkgconfig check glib-2.0} || %{defined _rsb_getting_source}
 %include %{_configdir}/glib-2-1.cfg
%endif
